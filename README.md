# ğŸ“– User Guide: Antigravity Publishing Engine

This guide explains how to operate the Multi-Agent Publishing Factory to generate high-fidelity textbooks from research corpora.

## ğŸ› ï¸ 1. Setup & Requirements

### Software Dependencies
- **Python 3.10+**
- **Pandoc**: `brew install pandoc`
- **Tectonic** (for high-end PDFs): `brew install tectonic`
- **Google Generative AI**: `pip install google-generativeai`

### Directory Structure
Ensure your workspace looks like this:
```bash
.
â”œâ”€â”€ orchestrator_harness.py  # The Python Engine
â”œâ”€â”€ build_book.sh            # PDF/HTML Build Script
â”œâ”€â”€ book_metadata.yaml       # Typesetting Config
â”œâ”€â”€ papers/                  # YOUR INPUT (PDFs/MDs here)
â””â”€â”€ prompts/                 # AGENT CORES (architect, writer, etc.)
```

---

## ğŸš€ 2. Running the Engine

### Step A: Configure API Key
The system requires a Gemini API Key to run in production mode.
```bash
export GOOGLE_API_KEY="your_api_key_here"
```

### Step B: Launch the Pipeline
Run the orchestrator. It will automatically scan your `./papers` folder and start the multi-agent drafting loop.
```bash
python3 orchestrator_harness.py
```

---

## âš™ï¸ 3. Configuration & Customization

You can customize the book's identity in the `__main__` block of `orchestrator_harness.py`:

```python
if __name__ == "__main__":
    cfg = {
        "CORPUS_PATH": "./papers",
        "OUTPUT_PATH": "./book_out",
        "TOKEN_BUDGET": 5000000,   # Prevent runaway costs
        "TARGET_AUDIENCE": "AI Researchers",
        "SERIES_GOAL": "Mastery of Agentic Workflows",
        "THEME_MODE": "O'Reilly Technical"
    }
    Orchestrator(cfg["CORPUS_PATH"], cfg["OUTPUT_PATH"], cfg).execute_pipeline()
```

---

## ğŸ“‚ 4. Understanding Outputs

1.  **`./book_out/`**: Contains the validated, individual Markdown chapters.
2.  **`the_physics_of_agentic_ai_full.md`**: The stitched "Master File" used for typesetting.
3.  **`The_Physics_of_Agentic_AI.pdf`**: The final typeset book (Professional Print Quality).
4.  **`The_Physics_of_Agentic_AI.html`**: The web-ready fallback.

---

## ğŸ› ï¸ 5. Troubleshooting

- **"PDF Build Failed"**: Ensure `tectonic` is installed. Check `book_out/` to see if chapters were actually generated.
- **"Token Budget Exceeded"**: Increase the `TOKEN_BUDGET` in `cfg` or reduce the number of papers in `./papers`.
- **"Mock Mode" Warning**: This means your `GOOGLE_API_KEY` isn't being picked up by the shell. Run `echo $GOOGLE_API_KEY` to verify.

---

**Generated by Antigravity v1.0**
